---
title: Свойства
layout: home
parent: Архитектура
---

# Cвойства в osysHome
Свойства представляют собой именованные характеристики объектов, которые управляются через класс **PropertyManager**. Каждое свойство содержит:

* **Значение** - текущие данные свойства
* **Тип данных** - определяет формат хранения и обработки
* **Историю изменений** - опциональное сохранение предыдущих значений
* **Источник** - кто или что изменило значение
* **Связи с модулями** - интеграция с внешними системами
* **Методы-обработчики** - автоматические действия при изменении

## Типы свойств и их обработка
Система поддерживает автоматическое преобразование типов данных в методе **_decodeValue()**.

### Поддерживаемые типы:
* **int** - целые числа
* **float** - числа с плавающей точкой
* **str** - строки
* **datetime** - дата и время с автоматическим преобразованием в UTC
* **dict** - словари через JSON
* **list** - списки через JSON
* **bool** - логические значения

## Создание и управление свойствами
### Добавление свойств к классам
Функция **addClassProperty()** создает свойство для всех объектов класса
```python
addClassProperty("temperature", "Sensor", "Temperature value",   
                history=7, type=PropertyType.Float, method_name="onTempChange")
```
### Добавление свойств к объектам
Функция **addObjectProperty()** создает индивидуальное свойство для конкретного объекта
```python
addObjectProperty("temperature", "Sensor01", "Temperature value",   
                history=7, type=PropertyType.Float, method_name="onTempChange")
```

## Работа со значениями свойств
### Установка значений
Метод **setProperty()** устанавливает новое значение с автоматической обработкой.

При установке значения система:

1. Проверяет права доступа
2. Преобразует значение в нужный тип
3. Сохраняет историю изменений
4. Вызывает связанные методы
5. Уведомляет связанные модули

### Получение значений
Метод **getProperty()** возвращает текущее значение с учетом типа данных.

## Связывание с модулями
### Установка связей
Свойства могут быть связаны с внешними плагинами для двунаправленной синхронизации

### Обработка связанных изменений
При изменении связанного свойства система автоматически уведомляет все связанные модули

## История изменений
### Сохранение истории
Система автоматически сохраняет историю изменений в отдельном потоке.

### Получение истории
API предоставляет endpoint для получения истории изменений с фильтрацией по времени.

## REST API для работы со свойствами
Система предоставляет полный REST API для управления свойствами:

* Получение значения: /api/property/<object.property> endpoints.py:105-140
* Установка значения: POST /api/property/<object.property> endpoints.py:142-187
* Информация о свойстве: /api/property/info/<object.property> endpoints.py:189-233

## Практические примеры использования
### Системные свойства
В системе есть встроенные свойства для системных переменных.

### Свойства пользователей
Класс Users содержит стандартные свойства для управления пользователями.

## Для чего используются свойства

1. **Хранение состояния устройств** - температура, влажность, состояние включения/выключения
2. **Конфигурация системы** - настройки, параметры работы
3. **Пользовательские данные** - профили, предпочтения, права доступа
4. **Интеграция с внешними системами** - синхронизация данных через связанные модули
5. **Автоматизация** - триггеры для выполнения действий при изменении значений


>Свойства в osysHome являются центральным механизмом хранения и обработки данных, обеспечивая типобезопасность, историю изменений, интеграцию с внешними системами и автоматическую обработку событий. Система автоматически управляет потокобезопасностью и сохранением данных в базе данных.